import CodeBlock from "@theme/CodeBlock";
import Example from "!!raw-loader!./example.yml";

:::caution

This built-in is unavailable for issues. Reviewpad will ignore it when running on issues.

:::

**Description**:

Assigns the most relevant and available reviewers to the pull request.

The relevancy is based on the code ownership information available on the impacted source files. The more lines of code are owned by a reviewer on the impacted source files, the more relevant this reviewer is for the pull request.

The availability is based on the number of open pull requests per reviewer. Above a configurable threshold (`max_reviews`), the reviewer is considered unavailable.

The assigned reviewers will always be different than the pull request's author.

If no relevant reviewers are available for the pull request, the reviewers are randomly selected from the list of GitHub repository collaborators.

If the pull request already has a reviewer, no action will be taken.

When there are no reviewers to assign to, an error is returned.

**Parameters**:

| Parameter                             | Type     | Description                                                                                   |
| :------------------------------------ | :--------| :-------------------------------------------------------------------------------------------- |
| `total_required_reviewers` (optional) | int      | The total number of required reviewers. By default, it is one.                                |
| `excluded_reviewers` (optional)       | []string | List of usernames to exclude from review requests.                                            |
| `max_reviews` (optional)              | int      | The maximum number of open pull requests that a single user can be responsible for reviewing. |

**Examples**:

```yml
$assignCodeAuthorReviewers(2, ["john", "marie"], 3)
```

A `reviewpad.yml` example:

<CodeBlock language="yml" title="reviewpad.yml">{Example}</CodeBlock>
